type Artist {
  id: ID!
  name: String!
  songs: [Song!]!
  albums: [AlbumPreview!]!
}

type ArtistPreview {
  id: ID!
  name: String!
}

type Album {
  id: ID!
  name: String!
  artist: ArtistPreview!
  songs: [Song!]!
}

type AlbumPreview {
  id: ID!
  name: String!
}

type Song {
  id: ID!
  title: String!
  artist: ArtistPreview!
  duration: Int
}

type SongPreview {
  id: ID!
  title: String!
}

type User {
  id: ID!
}

enum PlaylistVisibility {
  PUBLIC
  PRIVATE
}

type Playlist {
  id: ID!
  name: String!
  songs: [Song!]!
  creator: User!
  createdAt: String!
  visibility: PlaylistVisibility!
}

type PlaylistPreview {
  id: ID!
  name: String!
}

type UploadUrlResponse {
  uploadUrl: String!
}

type AddToPlaylistResult {
  playlistId: ID!
  songId: ID!
}

type RemoveFromPlaylistResult {
  playlistId: ID!
  songId: ID!
  removed: Boolean!
}

enum ContextType {
  ALBUM
  PLAYLIST
  ARTIST
  SONG
}

input SongPlayInput {
  artistId: String!
  songId: String!
  contextType: ContextType!
  contextId: String!
}

union RecentPlayedItem = AlbumPreview | SongPreview | ArtistPreview | PlaylistPreview

type Query {
  artist(artistId: ID!): Artist!
  album(albumId: ID!): Album!
  playlist(playlistId: ID!): Playlist!
  recentPlayed: [RecentPlayedItem!]!
}

input SongUploadInput {
  songTitle: String!
  artistId: ID!
  duration: Int!
  albumId: ID
}

type Mutation {
  """
  Get S3 upload URL to upload mp3 file into bucket
  """
  songPlay(input: SongPlayInput!): String!
  songUpload(input: SongUploadInput!): UploadUrlResponse!
  artistCreate(name: String!): Artist!
  albumCreate(name: String!, artistId: ID!): Album!
  playlistCreate(name: String!): Playlist!
  playlistAddToPlaylist(playlistId: ID!, songId: ID!, songArtistId: ID!): AddToPlaylistResult!
  playlistRemoveFromPlaylist(playlistId: ID!, songId: ID!): RemoveFromPlaylistResult!
}

