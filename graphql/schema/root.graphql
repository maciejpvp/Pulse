type Query {
  artist(artistId: ID!): Artist!

  album(input: AlbumQueryInput!): Album!

  playlist(playlistId: ID!): Playlist!

  song(songId: ID!, artistId: ID!): Song!

  recentPlayed: [RecentPlayedItem!]!

  bookmarks: BookmarkConnection!

  search(input: SearchInput!): SearchResponse

  cloudState: CloudState!

  devices: [Device!]!

}

type Mutation {
  """
  Get S3 upload URL to upload mp3 file into bucket
  """
  songPlay(input: SongPlayInput!): String!
  songRemove(input: RemoveSongInput!): Boolean!
  songUpload(input: SongUploadInput!): SongUploadResponse!

  artistCreate(name: String!): CreateArtistResponse!
  artistRemove(id: ID!): Boolean!

  albumCreate(name: String!, artistId: ID!): CreateAlbumResponse!
  albumRemove(input: RemoveAlbumInput!): Boolean!
  
  playlistCreate(name: String!): CreatePlaylistResponse!
  playlistAddSong(input: PlaylistAddSongInput!): PlaylistAddSongResult!
  playlistRemoveSong(input: PlaylistRemoveSongInput): PlaylistRemoveSongResult!

  cloudStateUpdate(input: CloudStateUpdateInput!): Boolean!
  _publishCloudState(input: CloudStateAttributes!): CloudState
    @aws_iam
  devicePing(input: DevicePingInput!): Boolean!
  _publishDevicePing(input: DevicePingInput!): Device
    @aws_iam

  bookmarkAdd(input: BookmarkAddInput!): Boolean!
  bookmarkRemove(input: BookmarkRemoveInput!): Boolean!
}

type Subscription {
  onDevicePing: Device
    @aws_subscribe(mutations: ["_publishDevicePing"])
    @aws_cognito_user_pools
    @aws_iam

  onCloudState: CloudState
    @aws_subscribe(mutations: ["_publishCloudState"])
    @aws_cognito_user_pools
    @aws_iam
}
